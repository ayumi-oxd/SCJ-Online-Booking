@model SCJ.Booking.MVC.ViewModels.ScCaseSearchViewModel

@{
    ViewData["Title"] = "ConferenceType";

    if (Model.AvailableConferenceTypeIds.Count == 1)
    {
        Model.HearingTypeId = Model.AvailableConferenceTypeIds.First();
    }
}

<div>
    <div class="mb-5">
        <i class="fas fa-arrow-left"></i>
        <a asp-action="index" asp-route-s="false">Step 1: Find the Case for Your Hearing</a>
    </div>

    <h3>4 steps to complete your booking</h3>
    <h1 class="my-2">Step 2: Choose a Conference Type</h1>

    <form method="post">
        @Html.HiddenFor(m => m.FullCaseNumber)
        @Html.HiddenFor(m => m.SelectedCaseId)
        @Html.HiddenFor(m => m.SelectedCourtClass)
        @Html.HiddenFor(m => m.LocationPrefix)
        @for (int i = 0; i < Model.AvailableConferenceTypeIds.Count; i++)
        {
            @Html.HiddenFor(m => m.AvailableConferenceTypeIds[i])
        }
        @for (int i = 0; i < Model.CourtFiles?.Length; i++)
        {
            @Html.HiddenFor(m => m.CourtFiles[i].courtClassCode)
            @Html.HiddenFor(m => m.CourtFiles[i].courtFileNumber)
            @Html.HiddenFor(m => m.CourtFiles[i].styleOfCause)
            @Html.HiddenFor(m => m.CourtFiles[i].physicalFileId)
            @Html.HiddenFor(m => m.CourtFiles[i].courtLevelCode)
        }

        <div class="my-4">
            <b>@Model.SelectedCourtFile?.styleOfCause</b>
            <div>
                @Model.SelectedCourtClassName 
            </div>
            <div>File Number: @Model.FileNumber</div>
        </div>

        <div class="row my-4 mx-0">
            <div class="col-md-6 form-group conference-type-selection bg-light rounded mb-0 p-3 p-sm-4">
                <b>Choose a conference type</b>
                <div class="btn-radio-group form-group">
                    @foreach (var hearingTypeId in Model.AvailableConferenceTypeIds)
                    {
                        if (hearingTypeId == ScHearingType.CPC)
                        {
                            <div class="form-check">
                                <input asp-for="HearingTypeId" class="form-check-input" type="radio"
                                id="CPC" name="HearingTypeId"
                                value="@ScHearingType.CPC">
                                <label for="CPC" class="form-check-label">Case Planning Conference (CPC)</label>
                            </div>
                        }
                        else if (hearingTypeId == ScHearingType.JCC)
                        {
                            <div class="form-check">
                                <input asp-for="HearingTypeId" class="form-check-input" type="radio"
                                    id="JCC" name="HearingTypeId"
                                    value="@ScHearingType.JCC">
                                <label for="JCC" class="form-check-label">Judicial Case Conference (JCC)</label>
                            </div>
                        }
                        else if (hearingTypeId == ScHearingType.TMC)
                        {
                            <div class="form-check">
                                <input asp-for="HearingTypeId" class="form-check-input" type="radio"
                                    id="TMC" name="HearingTypeId"
                                    value="@ScHearingType.TMC">
                                <label for="TMC" class="form-check-label">Trial Management Conference (TMC)</label>
                            </div>                            
                        }
                    }
                </div>
                <div>
                    <a href="https://www.bccourts.ca/supreme_court/scheduling" target="_blank">Contact the applicable Supreme Court scheduling office</a>
                    <i class="fa fa-external-link-alt"></i> by telephone for conference types not listed.
                </div>
            </div>
        </div>

        @if (Model.HearingTypeId == -1)
        {
            <div class="row px-3 pb-3 pt-0">
                <span asp-validation-for="HearingTypeId" class="text-danger"></span>
            </div>
        }

        <button type="submit"
                class="btn btn-primary btn-block mb-0">
                Show Available Times
        </button>
    </form>
</div>
